# 一、网络模型
1. **七层(从上到下): 应用层、表示层、会话层、传输层、网络层、数据链路层、物理层**。
2. **四层: 应用层、传输层、网络层、网络接口层**。
3. **TCP/UDP协议位于传输层**
4. **HTTP协议在应用层**
5. **IP协议位于网络层**
6. 
![image](https://note.youdao.com/yws/res/24856/5158AF2164BA481D922B20CE651E4817)

# 二、TCP协议

## 1. 概述
1. **TCP是面向连接的通讯协议，通过三次握手建立连接，四次挥手断开连接**
2. TCP 在数据传递时，有确认、窗口、重传、阻塞等控制机制，能保证数据正确性，较为可靠，TCP 相对于 UDP速度慢一点，要求系统资源较多
2. **基于字节流的数据传输**：将数据放入TCP发送缓冲区，真正发送数据时，**将**等待发送的**数据封装成**一个或多个**TCP报文段发出，每个报文段都包含一个序号，确保服务端有序接受数据**。
3. **可靠传输的依据**
- **TCP采用发送应答机制/有序数据传输**
- **超时重传/丢包重传**
- **错误校验**
- **流量控制和阻塞管理**

## 2. 三次握手
> **3次握手就跟早期打电话时的情况一样：1、听得到吗？2、听得到，你呢？3、我也听到了。然后才开始真正对话 4次挥手是：1、老师，下课了。2、好，我知道了，我说完这点。3、好了，说完了，下课吧。4、谢谢老师，老师再见**

*最开始的时候客户端和服务器都是处于CLOSED状态。主动打开连接的为客户端，被动打开连接的是服务器。*
1. TCP服务器进程先创建传输控制块TCB，时刻准备接受客户进程的连接请求，此时服务器就进入了LISTEN（监听）状态；
2. TCP**客户进程**也是先创建传输控制块TCB，然后向服务器发出连接请求报文，这是报文首部中的同部位**SYN=1**，同时选择一个**初始序列号 seq=x** ，此时，TCP客户端进程进入了 **SYN-SENT（同步已发送状态）状态**。TCP规定，SYN报文段（SYN=1的报文段）不能携带数据，但需要消耗掉一个序号。
3. **TCP服务器**收到请求报文后，如果同意连接，则**发出确认报文**。确认报文中应该 **ACK=1，SYN=1，确认号是ack=x+1**，同时也要为自己初始化一个序列号 **seq=y**，此时，TCP服务器进程进入了**SYN-RCVD（同步收到）状态**。这个报文也不能携带数据，但是同样要消耗一个序号。
4. TCP**客户进程**收到确认后，还要向服务器给出确认。确认报文的**ACK=1，ack=y+1，自己的序列号seq=x+1**，此时，TCP连接建立，客户端进入**ESTABLISHED（已建立连接）状态**。TCP规定，ACK报文段可以携带数据，但是如果不携带数据则不消耗序号。
5. 当服务器收到客户端的确认后也进入ESTABLISHED状态，此后双方就可以开始通信了。  
![image](https://note.youdao.com/yws/res/25726/7AA6D40C6C114CE8AAF000FDE0FAFF62)

## 3. 四次挥手
*注意: 中断连接端可以是客户端，也可以是服务器端*
1. 客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，**FIN=1，其序列号为seq=u**（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进**入FIN-WAIT-1（终止等待1）**状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。
2. 服务器收到连接释放报文，**发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v**，此时，服务端就进入了**CLOSE-WAIT（关闭等待）状态**。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。
3. 客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。
4. 服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，**FIN=1，ack=u+1，**由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为**seq=w**，此时，服务器就进入了**LAST-ACK（最后确认）状态**，等待客户端的确认。
5. 客户端收到服务器的连接释放报文后，必须发出确认，**ACK=1，ack=w+1，而自己的序列号是seq=u+1**，此时，客户端就进入**了TIME-WAIT（时间等待）状态**。注意此时TCP连接还没有释放，必须经过2∗ *∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。
6. 服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，**服务器结束TCP连接的时间要比客户端早一些。**
![image](https://note.youdao.com/yws/res/25738/228EAB05936B4155865C6740FD383311)

# 三、UDP
1. **UDP 是面向无连接的通讯协议，UDP 速度快、操作简单、要求系统资源较少，由于通讯不需要连接，可以实现广播发送,**
2. UDP 传送数据前不需要建立连接，不用接受确认信号，数据不可靠
3. 每个被传输的数据报必须在64KB之内。
4. **UDP面向消息的传输**，UDP协议的**保护消息边界**使得每一个消息都是独立的，独立接收
4. 适用于：语音广播，视频

# 四、HTTP
1. **超文本传输协议，互联网上应用最广泛的一种网络协议，位于应用层,默认端口80。**
2. **HTTP连接建立在TCP基础之上，HTTP/1.0默认短连接，HTTP/1.1默认长连接（响应头中加入：Connection:keep-alive）**，HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接。
3. **安全套接字层超文本传输协议HTTPS**,为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，**SSL依靠证书来验证服务器的身份**，并为浏览器和服务器之间的通信**加密**。
4. **HTTPS默认端口443**
5. 状态码
![image](https://note.youdao.com/yws/res/25193/8E1F5BA3B7174144A7B0148287FC5123)

# 五、IO 密集型和 CPU 密集型区别
1. **IO 密集型：多线程适合**。系统运作，大部分的状况是 CPU在等I/O (硬盘/内存)的读/写。
2. **CPU 密集型：多进程适合**。大部份时间用来做计算、逻辑判断等 CPU 动作的程序称之 CPU 密集型。

# 六、并行和并发
1. 并行：同一时刻多个任务同时在运行。
2. 并发：在同一时间间隔内多个任务都在运行，但是并不会在同一时刻同时运行，存在交替执行的情
况。**多线程是并发，多进程是并行**；

# 七、IP、子网掩码
1. **IP协议位于网络层**
1. **IP协议主要解决网络路由和寻址问题**
1. **将IP地址划分成网络地址和主机地址两部分**
2. ip地址、子网掩码的长度都是32位
3. 分为IPv4和IPv6：ipv4分为：0为A类，10为B类，110为C类，1110为D类，1111为E类。D类地址供组播使用，E类地址保留
![image](https://note.youdao.com/yws/res/26363/0E83FDAE7FF748859009222F018A9979)

# 八、C/S、B/S网络架构
1. C/S：客户机、服务器2层
2. B/S: 浏览器、应用服务器、数据库服务器3层

# 九、常见的服务器网络编程模型
1. 同步阻塞迭代模型
2. 多进程并发模型
3. 多线程并发模型
4. IO多路复用模型之select/poll
5. IO多路复用模型之epoll

# 十、 CDN(内容分发网络)、DNS(域名解析)

## 1. CDN
1. 在现有的internet中增加一层新的网络架构，将网站的内容发布到最接近用户的网络边缘，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。
2. 流程：当用户访问已经加入CDN服务的网站时，首先通过DNS重定向技术确定最接近用户的最佳CDN节点，同时将用户的请求指向该节点。当用户的请求到达指定节点时，CDN的服务器（节点上的高速缓存）负责将用户请求的内容提供给用户。
3. 具体流程：用户在自己的浏览器中输入要访问的网站的域名，浏览器向本地DNS请求对该域名的解析，本地DNS将请求发到网站的主DNS，主DNS根据一系列的策略确定当时最适当的CDN节点，并将解析的结果（IP地址）发给用户，用户向给定的CDN节点请求相应网站的内容。
4. CDN需要用到的技术：**负载均衡**技术、**动态内容分发与复制技术**、**缓存技术** 
5. CDN的不足：实时性不太好。

# 十一、DHCP动态主机配置协议
1. **DHCP**(Dynamic Host Configuration Protocol，**动态主机配置协议**),是一个很重要的局域网网络协议，使用UDP协议工作。
2. **允许一台计算机通过 DHCP 服务器自动获取网络配置参数**，如网卡的IP 地址、网关、掩码和主机名字等，这样只要启动计算机就能上网，而不用手工去配置计算机的网络参数。

# 十二、Kerberos网络身份认证协议
1. Kerberos 是指一种计算机网络上的身份认证协议，主要用来在非安全的计算机网络中，对个人通信以安全的手段进行身份认证。

# 十三、Radius局域网接入认证
1. Radius 是指局域网接入认证，用于解决一台计算机需要认证才能接入和使用局域网的问题。